<Window x:Class="FileManager.UI.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:FileManager.UI"
        xmlns:viewModels="clr-namespace:FileManager.UI.ViewModels"
        xmlns:sys="clr-namespace:System;assembly=mscorlib"
        xmlns:buttonProps="clr-namespace:HBLibrary.Wpf.Styles.Buttons;assembly=HBLibrary.Wpf"
        xmlns:nav="clr-namespace:HBLibrary.Wpf.Navigation;assembly=HBLibrary.Wpf"
        mc:Ignorable="d"
        Title="HB File Manager"
        x:Name="MainWindowApp"
        Height="720" 
        Width="1280"
        MinHeight="450"
        MinWidth="800"
        WindowStyle="SingleBorderWindow"
        ResizeMode="CanResizeWithGrip"
        Background="Transparent"
        WindowStartupLocation="CenterScreen">

    <WindowChrome.WindowChrome>
        <WindowChrome CaptionHeight="30" GlassFrameThickness="0" ResizeBorderThickness="5" CornerRadius="5" NonClientFrameEdges="None"/>
    </WindowChrome.WindowChrome>

    <Window.DataContext>
        <viewModels:MainWindowViewModel/>
    </Window.DataContext>

    <Window.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="pack://application:,,,/HBLibrary.Wpf;component/Styles/DefaultDark.xaml"/>
                <ResourceDictionary Source="pack://application:,,,/HBLibrary.Wpf;component/Styles/Button/Buttons.xaml"/>
                <ResourceDictionary Source="pack://application:,,,/HBLibrary.Wpf;component/Styles/Border/Borders.xaml"/>
                <ResourceDictionary Source="pack://application:,,,/HBLibrary.Wpf;component/Navigation/NavButtonStyle.xaml"/>
            </ResourceDictionary.MergedDictionaries>
        </ResourceDictionary>
    </Window.Resources>

    <Window.CommandBindings>
        <CommandBinding Command="{x:Static SystemCommands.CloseWindowCommand}" CanExecute="CommandBinding_CanExecute" Executed="CommandBinding_Executed_Close" />
        <CommandBinding Command="{x:Static SystemCommands.MaximizeWindowCommand}" CanExecute="CommandBinding_CanExecute" Executed="CommandBinding_Executed_Maximize" />
        <CommandBinding Command="{x:Static SystemCommands.MinimizeWindowCommand}" CanExecute="CommandBinding_CanExecute" Executed="CommandBinding_Executed_Minimize" />
        <CommandBinding Command="{x:Static SystemCommands.RestoreWindowCommand}" CanExecute="CommandBinding_CanExecute" Executed="CommandBinding_Executed_Restore" />
    </Window.CommandBindings>

    <Border x:Name="MainBorder"
            Style="{StaticResource VSCopy}"
            BorderThickness="1"
            CornerRadius="5"
            Background="{StaticResource HBDark_Background}">


        <Grid>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="100"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>

            <Grid.RowDefinitions>
                <RowDefinition Height="30"></RowDefinition>
                <RowDefinition Height="*"></RowDefinition>
            </Grid.RowDefinitions>

            <Border BorderBrush="{StaticResource HBDark_Border}"
                    BorderThickness="0 0 0 1"
                    CornerRadius="5 5 0 0"
                    Background="{StaticResource HBDark_Background}"
                    Grid.ColumnSpan="2">
            </Border>

            <StackPanel Grid.Row="0" Grid.ColumnSpan="2" VerticalAlignment="Center" Orientation="Horizontal" Margin="10 0 0 0">
                <Path Stretch="Uniform" Fill="White" Height="16" Width="16" Data="M6 2C4.89 2 4 2.89 4 4V20A2 2 0 0 0 6 22H12.68A7 7 0 0 1 12 19A7 7 0 0 1 19 12A7 7 0 0 1 20 12.08V8L14 2H6M13 3.5L18.5 9H13V3.5M18 14C17.87 14 17.76 14.09 17.74 14.21L17.55 15.53C17.25 15.66 16.96 15.82 16.7 16L15.46 15.5C15.35 15.5 15.22 15.5 15.15 15.63L14.15 17.36C14.09 17.47 14.11 17.6 14.21 17.68L15.27 18.5C15.25 18.67 15.24 18.83 15.24 19C15.24 19.17 15.25 19.33 15.27 19.5L14.21 20.32C14.12 20.4 14.09 20.53 14.15 20.64L15.15 22.37C15.21 22.5 15.34 22.5 15.46 22.5L16.7 22C16.96 22.18 17.24 22.35 17.55 22.47L17.74 23.79C17.76 23.91 17.86 24 18 24H20C20.11 24 20.22 23.91 20.24 23.79L20.43 22.47C20.73 22.34 21 22.18 21.27 22L22.5 22.5C22.63 22.5 22.76 22.5 22.83 22.37L23.83 20.64C23.89 20.53 23.86 20.4 23.77 20.32L22.7 19.5C22.72 19.33 22.74 19.17 22.74 19C22.74 18.83 22.73 18.67 22.7 18.5L23.76 17.68C23.85 17.6 23.88 17.47 23.82 17.36L22.82 15.63C22.76 15.5 22.63 15.5 22.5 15.5L21.27 16C21 15.82 20.73 15.65 20.42 15.53L20.23 14.21C20.22 14.09 20.11 14 20 14H18M19 17.5C19.83 17.5 20.5 18.17 20.5 19C20.5 19.83 19.83 20.5 19 20.5C18.16 20.5 17.5 19.83 17.5 19C17.5 18.17 18.17 17.5 19 17.5Z"/>
                <TextBlock Text="HB File Manager"
                           FontFamily="Bahnschrift SemiBold"
                               Margin="10,0,0,0" 
                               Foreground="White" FontSize="16"/>
            </StackPanel>

            <StackPanel Orientation="Horizontal" Grid.Row="0" Grid.Column="1"
                            HorizontalAlignment="Right" 
                            VerticalAlignment="Center">
                <Button x:Name="MinimizeButton"
                            Style="{StaticResource MinimizeButton}" 
                            Width="40"
                            WindowChrome.IsHitTestVisibleInChrome="True"
                            ToolTip="Minimize"
                            Command="{x:Static SystemCommands.MinimizeWindowCommand}"/>
                <Button x:Name="RestoreButton"
                            Style="{StaticResource RestoreButton}" 
                            Width="40"
                            WindowChrome.IsHitTestVisibleInChrome="True" 
                            ToolTip="Restore"
                            Visibility="Collapsed"
                            Command="{x:Static SystemCommands.RestoreWindowCommand}"/>
                <Button x:Name="MaximizeButton"
                            Style="{StaticResource MaximizeButton}" 
                            Width="40"
                            WindowChrome.IsHitTestVisibleInChrome="True" 
                            ToolTip="Maximize"
                            Visibility="Visible"
                            Command="{x:Static SystemCommands.MaximizeWindowCommand}"/>
                <Button x:Name="CloseButton"
                            buttonProps:ButtonAttachedProperties.CornerRadius="0 5 0 0"
                            Style="{StaticResource CloseButtonRed}" 
                            Width="40"
                            WindowChrome.IsHitTestVisibleInChrome="True" 
                            ToolTip="Close"
                            Command="{x:Static SystemCommands.CloseWindowCommand}"/>
            </StackPanel>

            <Border BorderBrush="{StaticResource HBDark_Border}" Grid.Column="0" Grid.Row="1"
                VerticalAlignment="Stretch"
                HorizontalAlignment="Stretch"
                BorderThickness="0 0 1 0">

                <ListBox x:Name="sidebar" Background="Transparent" BorderThickness="0" ItemsSource="{Binding NavButtons}" SelectedItem="{Binding CurrentPageSelection}">
                    <ListBox.ItemTemplate>
                        <DataTemplate DataType="{x:Type nav:NavButton}">
                            <nav:NavButton Icon="{Binding Icon}" 
                                           Text="{Binding Text}" 
                                           NavLink="{Binding NavLink}"
                                           Height="80" 
                                           SelectedBackground="{StaticResource HBDark_Border}" 
                                           HorizontalAlignment="Stretch" 
                                           Foreground="White"/>
                        </DataTemplate>
                    </ListBox.ItemTemplate>
                </ListBox>
            </Border>

            <Frame Grid.Column="1" Grid.Row="1" 
                   NavigationUIVisibility="Hidden"
                   Source="{Binding CurrentPageSource}">
                
            </Frame>
        </Grid>
    </Border>
</Window>
